{"remainingRequest":"/Users/andytseng/Sticker/vue-calender/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/andytseng/Sticker/vue-calender/src/components/login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/andytseng/Sticker/vue-calender/src/components/login.vue","mtime":1576153698874},{"path":"/Users/andytseng/Sticker/vue-calender/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/andytseng/Sticker/vue-calender/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/andytseng/Sticker/vue-calender/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/andytseng/Sticker/vue-calender/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/andytseng/Sticker/vue-calender/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmNvbnN0IGF4aW9zID0gcmVxdWlyZSgiYXhpb3MiKTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJsb2dpbiIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmdEaWFsb2c6IGZhbHNlLAogICAgICBsb2FkaW5nSW5mbzogIiIsCiAgICAgIGpvaW5EaWFsb2c6IGZhbHNlLAogICAgICBlbWFpbDogIiIsCiAgICAgIHBhc3N3b3JkOiAiIiwKICAgICAgdmFsaWQ6IGZhbHNlLAoKICAgICAgam9pbk5hbWU6ICIiLAogICAgICBqb2luUGFzczogIiIsCiAgICAgIGpvaW5FbWFpbDogIiIsCgogICAgICBwYXNzd29yZFJ1bGVzOiBbCiAgICAgICAgdiA9PiAhIXYgfHwgIuiri+i8uOWFpeS9v+eUqOiAheWvhueivCIsCiAgICAgICAgdiA9PiB2Lmxlbmd0aCA8PSAyMCB8fCAiTmFtZSBtdXN0IGJlIGxlc3MgdGhhbiAxMCBjaGFyYWN0ZXJzIgogICAgICBdLAogICAgICB1c2VybmFtZTogIiIsCiAgICAgIHVzZXJuYW1lUnVsZXM6IFt2ID0+ICEhdiB8fCAi6KuL6Ly45YWl5L2/55So6ICF5biz6JmfIl0sCiAgICAgIGpvaW5OYW1lUnVsZXM6IFt2ID0+ICEhdiB8fCAi6KuL6Ly45YWl5L2/55So6ICF5biz6JmfIl0sCiAgICAgIGpvaW5QYXNzUnVsZXM6IFt2ID0+ICEhdiB8fCAi6KuL6Ly45YWl5L2/55So6ICF5a+G56K8Il0sCiAgICAgIGpvaW5FbWFpbFJ1bGVzOiBbdiA9PiAhIXYgfHwgIuiri+i8uOWFpeS9v+eUqOiAheS/oeeusSJdLAogICAgICBlcnJvcl9tZXNzYWdlczogW10sCiAgICAgIGVycm9yUGFzczogZmFsc2UsCiAgICAgIGVycm9yTmFtZTogZmFsc2UKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBsb2dpbigpIHsKICAgICAgdGhpcy5sb2FkaW5nRGlhbG9nID0gdHJ1ZTsKICAgICAgdGhpcy5sb2FkaW5nSW5mbyA9ICLnmbvlhaXkuK3vvIzoq4vnqI3lgJkuLi4uIjsKICAgICAgYXhpb3MKICAgICAgICAucG9zdCgiL2FwaS9sb2dpbkNoZWNrIiwgewogICAgICAgICAgdXNlck5hbWU6IHRoaXMudXNlcm5hbWUsCiAgICAgICAgICB1c2VyUGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQKICAgICAgICB9KQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRoaXMubG9hZGluZ0RpYWxvZyA9IGZhbHNlOwogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInRva2VuIiwgIkltTG9naW4iKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ1c2VybmFtZSIsIHRoaXMudXNlcm5hbWUpOwogICAgICAgICAgdGhpcy5lcnJvciA9IGZhbHNlOwogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi8iKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICB0aGlzLmxvYWRpbmdEaWFsb2cgPSBmYWxzZTsKICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5kYXRhID09ICJXcm9uZyBVc2VyTmFtZSIpIHsKICAgICAgICAgICAgdGhpcy5lcnJvcl9tZXNzYWdlc1swXSA9ICLluLPomZ/kuI3mraPnoroiOwogICAgICAgICAgICB0aGlzLmVycm9yTmFtZSA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UuZGF0YSA9PSAiV3JvbmcgUGFzc3dvcmQhIikgewogICAgICAgICAgICB0aGlzLmVycm9yTmFtZSA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLmVycm9yX21lc3NhZ2VzWzBdID0gIiI7CiAgICAgICAgICAgIHRoaXMuZXJyb3JfbWVzc2FnZXNbMV0gPSAi5a+G56K85LiN5q2j56K6IjsKICAgICAgICAgICAgdGhpcy5lcnJvclBhc3MgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKICAgIGpvaW4oKSB7CiAgICAgIHRoaXMubG9hZGluZ0RpYWxvZyA9IHRydWU7CiAgICAgIHRoaXMubG9hZGluZ0luZm8gPSAi6JmV55CG5Lit77yM6KuL56iN5YCZLi4uLiI7CiAgICAgIGF4aW9zCiAgICAgICAgLnBvc3QoIi9hcGkvYWRkVXNlciIsIHsKICAgICAgICAgIHVzZXJOYW1lOiB0aGlzLmpvaW5OYW1lLAogICAgICAgICAgdXNlclBhc3N3b3JkOiB0aGlzLmpvaW5QYXNzLAogICAgICAgICAgdXNlckVtYWlsOiB0aGlzLmpvaW5FbWFpbAogICAgICAgIH0pCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgdGhpcy5sb2FkaW5nRGlhbG9nID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmpvaW5EaWFsb2cgPSBmYWxzZTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChyZXNwb25zZSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgfSk7CiAgICB9CiAgfSwKICBjb21wdXRlZDoge30sCgogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmVycm9yID0gZmFsc2U7CiAgfQp9Owo="},{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <transition name=\"fade\">\n    <v-container fluid style=\"height: 100vh;\" class=\"bgc\">\n      <v-layout row justify-center align-center style=\" height: 100%\">\n        <v-flex shrink>\n          <v-card min-width=\"350px\" max-width=\"450px\">\n            <v-card-text>\n              <div>紀錄生活中的一切...</div>\n              <v-divider />\n              <p />\n              <p class=\"display-2 text--primary\">登入</p>\n              <p>行事曆</p>\n            </v-card-text>\n            <v-form v-model=\"valid\">\n              <v-container>\n                <v-row>\n                  <v-col cols=\"12\">\n                    <v-text-field\n                      v-model=\"username\"\n                      :rules=\"usernameRules\"\n                      label=\"使用者名稱\"\n                      :error=\"errorName\"\n                      :error-messages=\"error_messages[0]\"\n                      required\n                    ></v-text-field>\n                  </v-col>\n                </v-row>\n                <v-row>\n                  <v-col cols=\"12\">\n                    <v-text-field\n                      v-model=\"password\"\n                      :rules=\"passwordRules\"\n                      label=\"使用者密碼\"\n                      type=\"password\"\n                      :error=\"errorPass\"\n                      :error-messages=\"error_messages[1]\"\n                      required\n                    ></v-text-field>\n                  </v-col>\n                </v-row>\n              </v-container>\n              <v-spacer></v-spacer>\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn text icon color=\"primary\" @click=\"joinDialog=true\">\n                  註冊\n                  <v-icon small>fas fa-user-plus</v-icon>\n                </v-btn>\n                <v-btn text icon color=\"primary\" @click=\"login()\">\n                  登入\n                  <v-icon small>fas fa-sign-in-alt</v-icon>\n                </v-btn>\n              </v-card-actions>\n            </v-form>\n          </v-card>\n        </v-flex>\n      </v-layout>\n\n      <v-row justify=\"center\">\n        <v-dialog v-model=\"joinDialog\" persistent max-width=\"600px\">\n          <v-card>\n            <v-card-title>\n              <span class=\"headline\">註冊帳號</span>\n            </v-card-title>\n            <v-card-text>\n              <v-container>\n                <v-row>\n                  <v-col cols=\"12\">\n                    <v-text-field v-model=\"joinName\" label=\"帳號名稱\" :rules=\"joinNameRules\" required></v-text-field>\n                  </v-col>\n                  <v-col cols=\"12\">\n                    <v-text-field v-model=\"joinEmail\" label=\"電子郵件\" :rules=\"joinEmailRules\" required></v-text-field>\n                  </v-col>\n                  <v-col cols=\"12\">\n                    <v-text-field\n                      v-model=\"joinPass\"\n                      label=\"密碼\"\n                      type=\"password\"\n                      :rules=\"joinPassRules\"\n                      required\n                    ></v-text-field>\n                  </v-col>\n                </v-row>\n              </v-container>\n            </v-card-text>\n            <v-card-actions>\n              <v-spacer></v-spacer>\n              <v-btn color=\"blue darken-1\" text @click=\"joinDialog=false\">取消</v-btn>\n              <v-btn color=\"blue darken-1\" text @click=\"join()\">註冊</v-btn>\n            </v-card-actions>\n          </v-card>\n        </v-dialog>\n      </v-row>\n      <v-dialog v-model=\"loadingDialog\" hide-overlay persistent width=\"300\">\n        <v-card color=\"primary\" dark>\n          <v-card-text>\n            {{loadingInfo}}\n            <v-progress-linear indeterminate color=\"white\" class=\"mb-0\"></v-progress-linear>\n          </v-card-text>\n        </v-card>\n      </v-dialog>\n    </v-container>\n  </transition>\n</template>\n<style>\n.bgc {\n  background-color: #5165a3;\n}\n</style>\n<script>\nconst axios = require(\"axios\");\nexport default {\n  name: \"login\",\n  data() {\n    return {\n      loadingDialog: false,\n      loadingInfo: \"\",\n      joinDialog: false,\n      email: \"\",\n      password: \"\",\n      valid: false,\n\n      joinName: \"\",\n      joinPass: \"\",\n      joinEmail: \"\",\n\n      passwordRules: [\n        v => !!v || \"請輸入使用者密碼\",\n        v => v.length <= 20 || \"Name must be less than 10 characters\"\n      ],\n      username: \"\",\n      usernameRules: [v => !!v || \"請輸入使用者帳號\"],\n      joinNameRules: [v => !!v || \"請輸入使用者帳號\"],\n      joinPassRules: [v => !!v || \"請輸入使用者密碼\"],\n      joinEmailRules: [v => !!v || \"請輸入使用者信箱\"],\n      error_messages: [],\n      errorPass: false,\n      errorName: false\n    };\n  },\n  methods: {\n    login() {\n      this.loadingDialog = true;\n      this.loadingInfo = \"登入中，請稍候....\";\n      axios\n        .post(\"/api/loginCheck\", {\n          userName: this.username,\n          userPassword: this.password\n        })\n        .then(response => {\n          this.loadingDialog = false;\n          localStorage.setItem(\"token\", \"ImLogin\");\n          localStorage.setItem(\"username\", this.username);\n          this.error = false;\n          this.$router.push(\"/\");\n        })\n        .catch(error => {\n          this.loadingDialog = false;\n          if (error.response.data == \"Wrong UserName\") {\n            this.error_messages[0] = \"帳號不正確\";\n            this.errorName = true;\n          }\n          if (error.response.data == \"Wrong Password!\") {\n            this.errorName = false;\n            this.error_messages[0] = \"\";\n            this.error_messages[1] = \"密碼不正確\";\n            this.errorPass = true;\n          }\n        });\n    },\n    join() {\n      this.loadingDialog = true;\n      this.loadingInfo = \"處理中，請稍候....\";\n      axios\n        .post(\"/api/addUser\", {\n          userName: this.joinName,\n          userPassword: this.joinPass,\n          userEmail: this.joinEmail\n        })\n        .then(response => {\n          this.loadingDialog = false;\n          this.joinDialog = false;\n        })\n        .catch(response => {\n          console.log(error);\n        });\n    }\n  },\n  computed: {},\n\n  mounted() {\n    this.error = false;\n  }\n};\n</script>"]}]}