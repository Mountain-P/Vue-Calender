{"remainingRequest":"/Users/andytseng/Sticker/vue-calender/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/andytseng/Sticker/vue-calender/src/components/login.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/andytseng/Sticker/vue-calender/src/components/login.vue","mtime":1576149137091},{"path":"/Users/andytseng/Sticker/vue-calender/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/andytseng/Sticker/vue-calender/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/andytseng/Sticker/vue-calender/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/andytseng/Sticker/vue-calender/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/andytseng/Sticker/vue-calender/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/andytseng/Sticker/vue-calender/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmJnYyB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzUxNjVhMzsKfQo="},{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA;AACA;AACA","file":"login.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <transition name=\"fade\">\n    <v-container fluid style=\"height: 100vh;\" class=\"bgc\">\n      <v-layout row justify-center align-center style=\" height: 100%\">\n        <v-flex shrink>\n          <v-card min-width=\"350px\" max-width=\"450px\">\n            <v-card-text>\n              <div>紀錄生活中的一切...</div>\n              <v-divider />\n              <p />\n              <p class=\"display-2 text--primary\">登入</p>\n              <p>行事曆</p>\n            </v-card-text>\n            <v-form v-model=\"valid\">\n              <v-container>\n                <v-row>\n                  <v-col cols=\"12\">\n                    <v-text-field\n                      v-model=\"username\"\n                      :rules=\"usernameRules\"\n                      label=\"使用者名稱\"\n                      :error=\"errorName\"\n                      :error-messages=\"error_messages[0]\"\n                      required\n                    ></v-text-field>\n                  </v-col>\n                </v-row>\n                <v-row>\n                  <v-col cols=\"12\">\n                    <v-text-field\n                      v-model=\"password\"\n                      :rules=\"passwordRules\"\n                      label=\"使用者密碼\"\n                      type=\"password\"\n                      :error=\"errorPass\"\n                      :error-messages=\"error_messages[1]\"\n                      required\n                    ></v-text-field>\n                  </v-col>\n                </v-row>\n              </v-container>\n              <v-spacer></v-spacer>\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn text icon color=\"primary\" @click=\"joinDialog=true\">\n                  註冊\n                  <v-icon small>fas fa-user-plus</v-icon>\n                </v-btn>\n                <v-btn text icon color=\"primary\" @click=\"login()\">\n                  登入\n                  <v-icon small>fas fa-sign-in-alt</v-icon>\n                </v-btn>\n              </v-card-actions>\n            </v-form>\n          </v-card>\n        </v-flex>\n      </v-layout>\n\n      <v-row justify=\"center\">\n        <v-dialog v-model=\"joinDialog\" persistent max-width=\"600px\">\n          <v-card>\n            <v-card-title>\n              <span class=\"headline\">註冊帳號</span>\n            </v-card-title>\n            <v-card-text>\n              <v-container>\n                <v-row>\n                  <v-col cols=\"12\">\n                    <v-text-field v-model=\"joinName\" label=\"帳號名稱\" :rules=\"joinNameRules\" required></v-text-field>\n                  </v-col>\n                  <v-col cols=\"12\">\n                    <v-text-field v-model=\"joinEmail\" label=\"電子郵件\" :rules=\"joinEmailRules\" required></v-text-field>\n                  </v-col>\n                  <v-col cols=\"12\">\n                    <v-text-field\n                      v-model=\"joinPass\"\n                      label=\"密碼\"\n                      type=\"password\"\n                      :rules=\"joinPassRules\"\n                      required\n                    ></v-text-field>\n                  </v-col>\n                </v-row>\n              </v-container>\n            </v-card-text>\n            <v-card-actions>\n              <v-spacer></v-spacer>\n              <v-btn color=\"blue darken-1\" text @click=\"joinDialog=false\">取消</v-btn>\n              <v-btn color=\"blue darken-1\" text @click=\"join()\">註冊</v-btn>\n            </v-card-actions>\n          </v-card>\n        </v-dialog>\n      </v-row>\n      <v-dialog v-model=\"loadingDialog\" hide-overlay persistent width=\"300\">\n        <v-card color=\"primary\" dark>\n          <v-card-text>\n            {{loadingInfo}}\n            <v-progress-linear indeterminate color=\"white\" class=\"mb-0\"></v-progress-linear>\n          </v-card-text>\n        </v-card>\n      </v-dialog>\n    </v-container>\n  </transition>\n</template>\n<style>\n.bgc {\n  background-color: #5165a3;\n}\n</style>\n<script>\nconst axios = require(\"axios\");\nexport default {\n  name: \"login\",\n  data() {\n    return {\n      loadingDialog: false,\n      loadingInfo: \"\",\n      joinDialog: false,\n      email: \"\",\n      password: \"\",\n      valid: false,\n\n      joinName: \"\",\n      joinPass: \"\",\n      joinEmail: \"\",\n\n      passwordRules: [\n        v => !!v || \"請輸入使用者密碼\",\n        v => v.length <= 20 || \"Name must be less than 10 characters\"\n      ],\n      username: \"\",\n      usernameRules: [v => !!v || \"請輸入使用者帳號\"],\n      joinNameRules: [v => !!v || \"請輸入使用者帳號\"],\n      joinPassRules: [v => !!v || \"請輸入使用者密碼\"],\n      joinEmailRules: [v => !!v || \"請輸入使用者信箱\"],\n      error_messages: [],\n      errorPass: false,\n      errorName: false\n    };\n  },\n  methods: {\n    login() {\n      this.loadingDialog = true;\n      this.loadingInfo = \"登入中，請稍候....\";\n      axios\n        .post(\"/api/loginCheck\", {\n          userName: this.username,\n          userPassword: this.password\n        })\n        .then(response => {\n          this.loadingDialog = false;\n          localStorage.setItem(\"token\", \"ImLogin\");\n          localStorage.setItem(\"username\", this.username);\n          this.error = false;\n          this.$router.push(\"/\");\n        })\n        .catch(error => {\n          if (error.response.data == \"Wrong UserName\") {\n            this.error_messages[0] = \"帳號不正確\";\n            this.errorName = true;\n          }\n          if (error.response.data == \"Wrong Password!\") {\n            this.errorName = false;\n            this.error_messages[0] = \"\";\n            this.error_messages[1] = \"密碼不正確\";\n            this.errorPass = true;\n          }\n        });\n    },\n    join() {\n      this.loadingDialog = true;\n      this.loadingInfo = \"處理中，請稍候....\";\n      axios\n        .post(\"/api/addUser\", {\n          userName: this.joinName,\n          userPassword: this.joinPass,\n          userEmail: this.joinEmail\n        })\n        .then(response => {\n          this.loadingDialog = false;\n          this.joinDialog = false;\n        })\n        .catch(response => {\n          console.log(error);\n        });\n    }\n  },\n  computed: {},\n\n  mounted() {\n    this.error = false;\n  }\n};\n</script>"]}]}